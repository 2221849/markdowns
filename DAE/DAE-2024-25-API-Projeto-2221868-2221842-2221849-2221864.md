# Desenvolvimento de Aplicações Empresariais

## Exemplo 1

**EP01.** O **Sistema de Logística** cria uma nova encomenda para o cliente Maria Silva (identificador de cliente #1) que é dividida em 3 volumes. O 1º volume contém 1 *Aparelho de televisão do modelo ABC* (identificador de produto #1), o 2º volume contém 1 *Aparelho de televisão do modelo BCE* (identificador de produto #2) e o 3º volume contém 24 unidades de *Gelados de morango XPTO* (identificador de produto #3). Utilizando o protocolo HTTP, verbo `POST`, para o endpoint: `/XYZ-Store/api/logistics/newOrder`

O corpo do pedido **recebido** por este recurso segue o seguinte formato JSON:

```json
{
  "customerId": 1,
  "orderTimestamp": "2024-10-31 19:02:38",
  "shipments": [
    {
      "id": 1,
      "product": 1,
      "quantity": 1
    },
    {
      "id": 2,
      "product": 2,
      "quantity": 1
    },
    {
      "id": 3,
      "product": 3,
      "quantity": 24
    }
  ]
}
```

A **Aplicação de Monitorização** ao criar a encomenda devolve o identificador de encomenda e os identificadores dos volumes da encomenda. A resposta **devolvida** por este recurso segue o formato JSON:

```json
{
  "orderId": 1,
  "shipments": [1, 2, 3]
}
```

## Exemplo 2

**EP02.** O **sensor** com o identificador #1 envia os dados lidos. Utilizando o protocolo HTTP, verbo `PUT`, para o endpoint: `/XYZ-Store/api/sensors/{sensorId}`

O corpo do pedido **recebido** por este recurso segue o seguinte formato JSON:

```json
{
  "dateTimestamp": "2024-10-31 17:41:25",
  "sensorData": "30 °C"
}
```

## Exemplo 3a

**EP03a.** O **Sistema de Logística** atribui a uma encomenda um volume que contém 24 unidades de *Gelados de morango XPTO* (identificador de produto #3) que é posto numa caixa isotérmica (tipo de embalagem `T`) contendo sensores de posicionamento e temperatura, (tipo de sensor `G` e `A` respetivamente). Utilizando o protocolo HTTP, verbo `POST`, para o endpoint: `/XYZ-Store/api/logistics/addShipment/{orderId}`

O corpo do pedido **recebido** por este recurso segue o seguinte formato JSON:

```json
{
  "productId": 3,
  "quantity": 24,
  "packageType": "T",
  "sensors": [
    {
      "id": 1,
      "type": "G"
    },
    {
      "id": 2,
      "type": "T"
    }
  ]
}
```

> "product": [{"id": 1,"quantity": 24},{"id": 2,"quantity": 10}]

A **Aplicação de Monitorização** ao adicionar o volume á encomenda, devolve o identificador do volume. A resposta **devolvida** por este recurso segue o formato JSON:

```json
{
  "shipmentId": 1
}
```

## Exemplo 3b

**EP03b.** O **Sistema de Logística** atribui a uma encomenda um volume que contém um *Aparelho de televisão do modelo ABC* (identificador de produto #1), este tipo de produto dispensa uma embalagem adicional (tipo de embalagem `W`) contendo sensores de posicionamento global e aceleração, (tipo de sensor `G` e `A` respetivamente). Utilizando o protocolo HTTP, verbo `POST`, para o endpoint: `/XYZ-Store/api/logistics/addShipment/{orderId}`

O corpo do pedido **recebido** por este recurso segue o seguinte formato JSON:

```json
{
  "orderId": 1,
  "shipment": {
    "id": 2,
    "productId": 1,
    "quantity": 1,
    "packageType": "W",
    "sensors": [
      {
        "id": 3,
        "type": "G"
      },
      {
        "id": 4,
        "type": "A"
      }
    ]
  }
}
```

A **Aplicação de Monitorização** ao adicionar o volume á encomenda devolve o identicador do volume. A resposta **devolvida** por este recurso segue o formato JSON:

```json
{
  "shipmentId": 2
}
```

## Exemplo 4

**EP04.** O **Sistema de Apoio ao Cliente** pede os dados de todas as encomendas do cliente Maria Silva (identificador de cliente #1) utilizando o protocolo HTTP, verbo `GET`, para o endpoint: `/XYZ-Store/api/customerSupport/{customerId}`

A resposta **devolvida** por este recurso segue o formato JSON:

```json
{
  "orders": [
    {
      "id": 1,
      "timestamp": "2024-10-31 19:02:38",
      "shipments": [
        {
          "id": 1,
          "status": "F",
          "packages": [
            {
              "id": 1,
              "type": "T",
              "products": [
                {
                  "id": 1,
                  "quantity": 1
                }
              ],
              "sensors": [
                {
                  "id": 1,
                  "type": "G"
                },
                {
                  "id": 2,
                  "type": "T"
                }
              ]
            }
          ]
        },
        {
          "id": 2,
          "status": "F",
          "packages": [
            {
              "id": 2,
              "type": "W",
              "products": [
                {
                  "id": 2,
                  "quantity": 1
                }
              ],
              "sensors": [
                {
                  "id": 3,
                  "type": "G"
                },
                {
                  "id": 4,
                  "type": "A"
                }
              ]
            }
          ]
        },
        {
          "id": 3,
          "status": "P",
          "packages": [
            {
              "id": 3,
              "type": "W",
              "products": [
                {
                  "id": 3,
                  "quantity": 24
                }
              ],
              "sensors": []
            }
          ]
        }
      ]
    }
  ]
}
```

## Exemplo 5

**EP05.** O **Sistema de Logística** ao entregar o volume com o identificador #1 cuja encomenda também tem identificador #1, desativa os sensores associados às embalagens do volume da encomenda e o estado do volume da encomenda passa para *"Entregue ao Cliente"*. Utilizando o protocolo HTTP, verbo `PUT`, para o endpoint: `/XYZ-Store/api/logistics/shipmentDelivered/{shipmentId}`

O corpo do pedido **recebido** por este recurso segue o seguinte formato JSON:

```json
{
  "packages": [
    {
      "id": 1,
      "sensors": [
        {
          "id": 1,
          "status": false
        },
        {
          "id": 2,
          "status": false
        }
      ]
    }
  ],
  "status": "F"
}
```

## Exemplo 6

**EP06.** O **Sistema de Gestão Operacional** requisita os dados de todas as encomendas utilizando o protocolo HTTP, verbo `GET`, para o endpoint: `/XYZ-Store/api/warehouse/allOrders`

A resposta **devolvida** por este recurso segue o formato JSON:

```json
{
  [
    {
      "customerId": 1,
      "orders": [
        {
          "id": 1,
          "timestamp": "2024-10-31 19:02:38",
          "shipments": [
            {
              "id": 1,
              "status": "F",
              "packages": [
                {
                  "id": 1,
                  "type": "T",
                  "products": [
                    {
                      "id": 1,
                      "quantity": 1
                    }
                  ],
                  "sensors": [
                    {
                      "id": 1,
                      "type": "G"
                    },
                    {
                      "id": 2,
                      "type": "T"
                    }
                  ]
                }
              ]
            },
            {
              "id": 2,
              "status": "F",
              "packages": [
                {
                  "id": 2,
                  "type": "W",
                  "products": [
                    {
                      "id": 2,
                      "quantity": 1
                    }
                  ],
                  "sensors": [
                    {
                      "id": 3,
                      "type": "G"
                    },
                    {
                      "id": 4,
                      "type": "A"
                    }
                  ]
                }
              ]
            },
            {
              "id": 3,
              "status": "P",
              "packages": [
                {
                  "id": 3,
                  "type": "W",
                  "products": [
                    {
                      "id": 3,
                      "quantity": 24
                    }
                  ],
                  "sensors": []
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
```
